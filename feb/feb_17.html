<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>practice </title>
</head>

<body>
    <h1> 17 Feb 2022 </h1>
    <h2> Week Four </h2>
    <h2> Async Await Exercises</h2>


    <script>
        // Ex 1
        function strLength(someName, cb) {
            cb(someName.length);
        }

        const printName = (someNum1) => console.log(`OMG! My name is ${someNum1} characters long!`);

        strLength("ruchi", printName);
        strLength("ruchirang", printName)
        printName(6);
        printName("Ben");


        //Ex 2  
        const noKill = () => {
            console.log("yay, I am alive");
        }

        const yesKill = () => {
            console.log("give my bose speakers and headphones to my sister");
        }

        const willThanosKillMe = (someName, noKill, yesKill) => {
            if (someName.length % 2 === 0) {
                noKill();
            } else {
                yesKill();
            }
        }

        willThanosKillMe("Ruchir", noKill, yesKill);
        willThanosKillMe("aka", noKill, yesKill);
        willThanosKillMe("zep", noKill, yesKill);


        //Ex3
        const writeFunc = (someMessage, someDelay) => {
            setTimeout(() => console.log(someMessage), someDelay);
        }

        writeFunc("Main hun DON", 1000);
        writeFunc("Bijli giraane, main hu aayi", 2000);
        // writeFunc("बिजली गिराने मैं हूँ आयी ", 3000);


        //Ex 6.1
        const intervalType = (someMessage, someTime) => {
            let x = setInterval(() => console.log(someMessage), someTime);
            setTimeout(() => clearInterval(x), 12000);
            setTimeout(() => console.log("STOP Mogambo"), 12000);
        }
        intervalType("Mogambo Khsuh hua", 2000);


        //Ex 6.2

        const takeNum = (someNumber) => {
            console.log(someNumber);
            let myInterval = setInterval(() => console.log(someNumber--), 1000)
            setTimeout(() => console.log("Bang Bang"), someNumber * 1000)
            setTimeout(() => clearInterval(myInterval), someNumber * 1000)
        }
        takeNum(5);


        //Fakefetch
        function fakeFetch(msg, shouldReject) {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    if (shouldReject) {
                        reject(`error from server: ${msg}`);
                    }
                    resolve(`from server: ${msg}`);
                }, 3000);
            });
        }

        const successHandler = (data) => console.log(data);
        const errorHandler = (err) => console.log(err);

        fakeFetch("On Success")
            .then(successHandler)
            .catch(errorHandler)

        const getServerResponseLength = (msg) => {
            fakeFetch(msg).then((data) => data.length)
        }
        getServerResponseLength("RuchirangG");



        //WaterFall
        const syncCallsToServer = (msg1, msg2) => {
            fakeFetch(msg1).then(datafromMsg1 => fakeFetch(msg2).then((datafromMsg2) => console.log({datafromMsg1,  datafromMsg2  })))
        }

        syncCallsToServer("Tanay", "Pratap");

        const waterFall = async (msg1, msg2) => {
            const dataFromOne= await fakeFetch(msg1);
           const datafromMsg2= await fakeFetch(msg2);

           console.log({dataFromOne, dataFromTwo});
        
        }
    </script>
</body>

</html>